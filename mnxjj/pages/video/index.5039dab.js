(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{539:function(e,t,n){},543:function(e,t,n){"use strict";n(11),n(8),n(6),n(4),n(9);var r=n(19),o=n(2),c=(n(539),n(3)),l=n(80),d=n(44),v=n(15),h=n(122),f=n(13),m=n(25),y=n(43),w=n(125),k=n(7);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function C(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a=Object(c.a)(v.a,w.a,y.a,f.a,Object(h.a)("chipGroup"),Object(m.b)("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default:function(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:function(){return{proxyClass:"v-chip--active"}},computed:{classes:function(){return C(C(C(C({"v-chip":!0},y.a.options.computed.classes.call(this)),{},{"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose},this.themeClasses),this.sizeableClasses),this.groupClasses)},hasClose:function(){return Boolean(this.close)},isClickable:function(){return Boolean(y.a.options.computed.isClickable.call(this)||this.chipGroup)}},created:function(){var e=this;[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]].forEach((function(t){var n=Object(r.a)(t,2),o=n[0],c=n[1];e.$attrs.hasOwnProperty(o)&&Object(k.a)(o,c,e)}))},methods:{click:function(e){this.$emit("click",e),this.chipGroup&&this.toggle()},genFilter:function(){var e=[];return this.isActive&&e.push(this.$createElement(d.a,{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(l.b,e)},genClose:function(){var e=this;return this.$createElement(d.a,{staticClass:"v-chip__close",props:{right:!0,size:18},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.$emit("click:close"),e.$emit("update:active",!1)}}},this.closeIcon)},genContent:function(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render:function(e){var t=[this.genContent()],n=this.generateRouteLink(),r=n.tag,data=n.data;data.attrs=C(C({},data.attrs),{},{draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:data.attrs.tabindex}),data.directives.push({name:"show",value:this.active}),data=this.setBackgroundColor(this.color,data);var o=this.textColor||this.outlined&&this.color;return e(r,this.setTextColor(o,data),t)}})},549:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(e){return e.$get("/videos",{progress:!1})},o=function(e,data){return e.$post("/videos/score",data,{progress:!1})}},550:function(e,t,n){},568:function(e,t,n){"use strict";var r=n(550);n.n(r).a},580:function(e,t,n){"use strict";n.r(t);n(26),n(29),n(83);var r=n(22),video=n(549),o={middleware:"video-client",fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(video.a)(e.$axios).then((function(e){return e.data}));case 2:e.videos=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{videos:[],video:null,loop:!1,current:0,error:!1,show:!1,loading:!1,iconPlayShow:!1,likeList:[],dislikeList:[]}},computed:{disableLike:function(){return function(e){return this.likeList.includes(e)}},disableDislike:function(){return function(e){return this.dislikeList.includes(e)}}},watch:{"$fetchState.pending":function(){this.playVideo()}},destroyed:function(){this.video.pause(),this.video.src=""},mounted:function(){this.playVideo()},methods:{playVideo:function(){var e=this;this.$fetchState.pending||(this.video=this.$refs.video,setTimeout((function(){e.video.play(),e.video.paused&&(e.iconPlayShow=!0)}),100))},changeVideo:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(document.fullscreenElement?e.show=!0:e.show=!1,e.error=!1,setTimeout((function(){e.video.pause(),e.iconPlayShow=!1,e.current+=1,e.video.src=e.videos[e.current],e.video.play(),e.video.paused&&(e.iconPlayShow=!0)}),500),!(e.videos.length-e.current<=3)){t.next=9;break}return t.next=6,Object(video.a)(e.$axios);case 6:n=t.sent,n.data.forEach((function(t){e.videos.push(t)}));case 9:case"end":return t.stop()}}),t)})))()},pauseVideo:function(){var e=this;this.video.paused?setTimeout((function(){e.iconPlayShow=!1,e.video.play()}),100):setTimeout((function(){e.iconPlayShow=!0,e.video.pause()}),100)},canPlay:function(){this.loading=!1,this.show=!0},waiting:function(){this.loading=!0},onPlayerEnded:function(){this.changeVideo()},videoLoadError:function(){this.error=!0},fullscreenVideo:function(){var video=this.video;video.requestFullScreen?video.requestFullScreen():video.mozRequestFullScreen?video.mozRequestFullScreen():video.webkitRequestFullScreen?video.webkitRequestFullScreen():video.msRequestFullscreen?video.msRequestFullscreen():this.$toast.show("抱歉您的浏览器不支持全屏播放")},like:function(e){this.likeList.push(e);var data={url:e,type:1};Object(video.b)(this.$axios,data)},dislike:function(e){this.dislikeList.push(e);var data={url:e,type:2};Object(video.b)(this.$axios,data)}},head:function(){return{title:"短视频"}}},c=(n(568),n(38)),l=n(47),d=n.n(l),v=n(192),h=n(511),f=n(543),m=n(183),y=n(186),w=n(113),k=n(533),_=n(531),C=n(514),O=n.n(C),S=n(51),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"video-box d-flex justify-center align-center"},[e.videos?[n("div",{staticClass:"video",staticStyle:{position:"relative"}},[n("transition",{attrs:{name:"fade"}},[n("video",{directives:[{name:"show",rawName:"v-show",value:e.show&&!e.error,expression:"show&&!error"}],ref:"video",staticClass:"video",attrs:{preload:"",loop:e.loop,src:e.videos[0]},on:{click:e.pauseVideo,ended:e.onPlayerEnded,waiting:e.waiting,canplay:e.canPlay,error:function(t){return t.preventDefault(),e.videoLoadError(t)}}})]),e._v(" "),n("transition",{attrs:{name:"fade"}},[n("v-overlay",{directives:[{name:"show",rawName:"v-show",value:!e.show&&!e.error||e.loading,expression:"(!show&&!error)||loading"}],attrs:{opacity:"0.1",value:!0,absolute:""}},[n("v-progress-circular",{attrs:{color:"pink",indeterminate:"",size:"64"}})],1)],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"load-error"},[n("v-card",{staticClass:"load-error d-flex align-center justify-center"},[n("v-chip",{attrs:{color:"pink",label:"",outlined:""}},[e._v("\n              视频加载失败请切换视频或者刷新浏览器！\n            ")])],1)],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.iconPlayShow&&!e.error,expression:"iconPlayShow&&!error"}],staticClass:"icon-play",staticStyle:{left:"50%"}},[n("v-btn",{attrs:{fab:"",dark:"",large:"",color:"grey darken-3"},on:{click:e.pauseVideo}},[n("v-icon",[e._v("\n            mdi-play\n          ")])],1)],1)],1),e._v(" "),n("div",{staticClass:"d-flex flex-column mx-5"},[n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"my-2",attrs:{fab:"",dark:"",large:"",color:"pink",disabled:e.disableLike(e.videos[e.current])},on:{click:function(t){return e.like(e.videos[e.current])}}},"v-btn",o,!1),r),[n("v-icon",[e._v("\n              mdi-heart\n            ")])],1)]}}],null,!1,740837772)},[e._v(" "),n("span",[e._v("喜欢")])]),e._v(" "),n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"my-2",attrs:{fab:"",dark:"",large:"",color:"grey",disabled:e.disableDislike(e.videos[e.current])},on:{click:function(t){return e.dislike(e.videos[e.current])}}},"v-btn",o,!1),r),[n("v-icon",[e._v("\n              mdi-thumb-down\n            ")])],1)]}}],null,!1,2449808362)},[e._v(" "),n("span",[e._v("不喜欢")])]),e._v(" "),n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"my-2",attrs:{fab:"",dark:"",large:"",color:"light-blue"},on:{click:e.changeVideo}},"v-btn",o,!1),r),[n("v-icon",[e._v("\n              mdi-autorenew\n            ")])],1)]}}],null,!1,689102192)},[e._v(" "),n("span",[e._v("切换")])]),e._v(" "),n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"my-2",attrs:{fab:"",dark:"",large:"",color:"light-green"},on:{click:e.fullscreenVideo}},"v-btn",o,!1),r),[n("v-icon",[e._v("\n              mdi-fullscreen\n            ")])],1)]}}],null,!1,423684791)},[e._v(" "),n("span",[e._v("全屏")])]),e._v(" "),n("v-switch",{attrs:{primary:"",color:"orange",label:"循环播放"},model:{value:e.loop,callback:function(t){e.loop=t},expression:"loop"}})],1)]:[n("v-chip",{attrs:{color:"pink",label:"",outlined:""}},[e._v("\n      无法获取到视频源\n    ")])]],2)}),[],!1,null,"37c3793d",null);t.default=component.exports;d()(component,{VBtn:v.a,VCard:h.a,VChip:f.a,VIcon:m.a,VOverlay:y.a,VProgressCircular:w.a,VSwitch:k.a,VTooltip:_.a}),O()(component,{Ripple:S.a})}}]);