(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{539:function(e,t,o){},543:function(e,t,o){"use strict";o(11),o(8),o(6),o(4),o(9);var r=o(19),n=o(2),c=(o(539),o(3)),l=o(80),d=o(44),h=o(15),v=o(122),f=o(13),m=o(25),w=o(43),y=o(125),k=o(7);function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a=Object(c.a)(h.a,y.a,w.a,f.a,Object(v.a)("chipGroup"),Object(m.b)("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default:function(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:function(){return{proxyClass:"v-chip--active"}},computed:{classes:function(){return O(O(O(O({"v-chip":!0},w.a.options.computed.classes.call(this)),{},{"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose},this.themeClasses),this.sizeableClasses),this.groupClasses)},hasClose:function(){return Boolean(this.close)},isClickable:function(){return Boolean(w.a.options.computed.isClickable.call(this)||this.chipGroup)}},created:function(){var e=this;[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]].forEach((function(t){var o=Object(r.a)(t,2),n=o[0],c=o[1];e.$attrs.hasOwnProperty(n)&&Object(k.a)(n,c,e)}))},methods:{click:function(e){this.$emit("click",e),this.chipGroup&&this.toggle()},genFilter:function(){var e=[];return this.isActive&&e.push(this.$createElement(d.a,{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(l.b,e)},genClose:function(){var e=this;return this.$createElement(d.a,{staticClass:"v-chip__close",props:{right:!0,size:18},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.$emit("click:close"),e.$emit("update:active",!1)}}},this.closeIcon)},genContent:function(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render:function(e){var t=[this.genContent()],o=this.generateRouteLink(),r=o.tag,data=o.data;data.attrs=O(O({},data.attrs),{},{draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:data.attrs.tabindex}),data.directives.push({name:"show",value:this.active}),data=this.setBackgroundColor(this.color,data);var n=this.textColor||this.outlined&&this.color;return e(r,this.setTextColor(n,data),t)}})},549:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return n}));var r=function(e){return e.$get("/videos",{progress:!1})},n=function(e,data){return e.$post("/videos/score",data,{progress:!1})}},551:function(e,t,o){},569:function(e,t,o){"use strict";var r=o(551);o.n(r).a},583:function(e,t,o){"use strict";o.r(t);o(26),o(29),o(83);var r=o(22),video=o(549),n={middleware:"video-client",layout:"video",asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.$axios,t.next=3,Object(video.a)(o);case 3:return r=t.sent,data=r.data,t.abrupt("return",{videos:data});case 6:case"end":return t.stop()}}),t)})))()},data:function(){var e=this;return{videos:[],isQQMobile:!1,video:null,current:0,error:!1,show:!1,loading:!1,iconPlayShow:!1,likeList:[],dislikeList:[],touch:{up:function(){return e.changeVideo("up")},down:function(){return e.changeVideo("down")}}}},computed:{disableLike:function(){return function(e){return this.likeList.includes(e)}},disableDislike:function(){return function(e){return this.dislikeList.includes(e)}}},destroyed:function(){this.video.pause(),this.video.src=""},mounted:function(){this.playVideo()},methods:{playVideo:function(){var e=this;this.isQQMobile=navigator.userAgent.toLowerCase().includes("mqqbrowser"),this.video=this.$refs.video,setTimeout((function(){e.video.play(),e.video.paused&&(e.iconPlayShow=!0)}),100),"1"!==localStorage.getItem("tip")&&(this.$toast.show("上滑加载下一条视频，下滑加载上一条视频",{position:"bottom-center",duration:3e3}),localStorage.setItem("tip","1"))},changeVideo:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t.show=!1,t.error=!1,setTimeout((function(){t.video.pause(),t.iconPlayShow=!1,"down"===e?t.current>0&&(t.current-=1):t.current+=1,t.video.src=t.videos[t.current],t.video.play(),t.video.paused&&(t.iconPlayShow=!0)}),500),!(t.videos.length-t.current<=3)){o.next=9;break}return o.next=6,Object(video.a)(t.$axios);case 6:r=o.sent,r.data.forEach((function(e){t.videos.push(e)}));case 9:case"end":return o.stop()}}),o)})))()},pauseVideo:function(){var e=this;this.video.paused?setTimeout((function(){e.iconPlayShow=!1,e.video.play()}),100):setTimeout((function(){e.iconPlayShow=!0,e.video.pause()}),100)},videoLoadError:function(){this.error=!0},canPlay:function(){this.loading=!1,this.show=!0},waiting:function(){this.loading=!0},like:function(e){this.likeList.push(e);var data={url:e,type:1};Object(video.b)(this.$axios,data)},dislike:function(e){this.dislikeList.push(e);var data={url:e,type:2};Object(video.b)(this.$axios,data)}},head:function(){return{title:"短视频"}}},c=(o(569),o(38)),l=o(47),d=o.n(l),h=o(192),v=o(511),f=o(543),m=o(183),w=o(186),y=o(113),k=o(37),C=o(514),O=o.n(C),x=o(126),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",{directives:[{name:"touch",rawName:"v-touch",value:e.touch,expression:"touch"}],staticClass:"video-box",attrs:{color:"black"}},[o("v-toolbar",{directives:[{name:"show",rawName:"v-show",value:e.iconPlayShow,expression:"iconPlayShow"}],staticClass:"bar",attrs:{dense:"",color:"transparent"}},[o("v-btn",{attrs:{nuxt:"",link:"",to:"/",icon:""}},[o("v-icon",{attrs:{large:"",color:"pink"}},[e._v("\n        mdi-home\n      ")])],1)],1),e._v(" "),e.videos?[o("transition",{attrs:{name:"fade"}},[o("video",{directives:[{name:"show",rawName:"v-show",value:e.show&&!e.error||e.isQQMobile,expression:"(show&&!error)|| isQQMobile"}],ref:"video",staticClass:"video",attrs:{"webkit-playsinline":"true",playsinline:"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true",preload:"",loop:"",src:e.videos[0]},on:{waiting:e.waiting,canplay:e.canPlay,click:e.pauseVideo,error:function(t){return t.preventDefault(),e.videoLoadError(t)}}})]),e._v(" "),o("transition",{attrs:{name:"fade"}},[o("v-overlay",{directives:[{name:"show",rawName:"v-show",value:!e.show&&!e.error||e.loading,expression:"(!show&&!error)||loading"}],attrs:{opacity:"0.1",value:!0,absolute:""}},[o("v-progress-circular",{attrs:{color:"pink",indeterminate:"",size:"64"}})],1)],1),e._v(" "),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"load-error"},[o("v-card",{staticClass:"load-error d-flex align-center justify-center"},[o("v-chip",{attrs:{color:"pink",label:"",outlined:""}},[e._v("\n            视频加载失败请切换视频或者刷新浏览器！\n          ")])],1)],1)]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.iconPlayShow&&!e.error,expression:"iconPlayShow&&!error"}],staticClass:"icon-play",staticStyle:{left:"45%"}},[o("v-btn",{attrs:{fab:"",dark:"",large:"",color:"grey darken-3"},on:{click:e.pauseVideo}},[o("v-icon",[e._v("\n          mdi-play\n        ")])],1)],1),e._v(" "),o("div",{staticClass:"tool-btns"},[o("div",{staticClass:"d-flex flex-column"},[o("v-btn",{staticClass:"my-2",attrs:{fab:"",dark:"",color:"transparent",disabled:e.disableLike(e.videos[e.current])},on:{click:function(t){return e.like(e.videos[e.current])}}},[o("v-icon",{attrs:{color:"pink"}},[e._v("\n            mdi-heart\n          ")])],1),e._v(" "),o("v-btn",{staticClass:"my-2",attrs:{fab:"",dark:"",color:"transparent",disabled:e.disableDislike(e.videos[e.current])},on:{click:function(t){return e.dislike(e.videos[e.current])}}},[o("v-icon",{attrs:{color:"grey darken-4"}},[e._v("\n            mdi-thumb-down\n          ")])],1)],1)])]:[o("v-chip",{attrs:{color:"pink",label:"",outlined:""}},[e._v("\n      无法获取到视频源\n    ")])]],2)}),[],!1,null,"13d672c3",null);t.default=component.exports;d()(component,{VBtn:h.a,VCard:v.a,VChip:f.a,VIcon:m.a,VOverlay:w.a,VProgressCircular:y.a,VToolbar:k.a}),O()(component,{Touch:x.a})}}]);